enable
configure terminal
hostname MSW_ANEXO

! -- SEGURIDAD BÁSICA Y SSH
service password-encryption
ip domain-name juanmark.com
crypto key generate rsa
1024
username admin secret cisco

! -- VTP
vtp domain juanmark
vtp version 2
vtp mode client

! -- CONFIGURACIÓN INICIAL
no ip cef
no ipv6 cef
spanning-tree mode pvst
spanning-tree extend system-id

! -- INTERFAZ LÓGICA ETHERCHANNEL
interface Port-channel1
 switchport mode trunk
 ip dhcp snooping trust
 ip arp inspection trust
 no shutdown
exit

! -- CONFIGURACIÓN DE PUERTOS DE ACCESO

! VLAN 33 (GESTION_TI)
interface range GigabitEthernet1/0/1, GigabitEthernet1/0/4-6
 switchport mode access
 switchport access vlan 33
 spanning-tree portfast
 switchport port-security
 switchport port-security maximum 2
 switchport port-security violation restrict
 switchport port-security mac-address sticky
 no shutdown
exit

! VLAN 34 (GESTION_WLAN)
interface range GigabitEthernet1/0/2, GigabitEthernet1/0/7-9
 switchport mode access
 switchport access vlan 34
 spanning-tree portfast
 switchport port-security
 switchport port-security maximum 2
 switchport port-security violation restrict
 switchport port-security mac-address sticky
 no shutdown
exit

! VLAN 35 (VENTAS)
interface range GigabitEthernet1/0/10-11, GigabitEthernet1/0/14
 switchport mode access
 switchport access vlan 35
 spanning-tree portfast
 switchport port-security
 switchport port-security maximum 2
 switchport port-security violation restrict
 switchport port-security mac-address sticky
 no shutdown
exit

! VLAN 36 (COMPRAS)
interface range GigabitEthernet1/0/15-17
 switchport mode access
 switchport access vlan 36
 spanning-tree portfast
 switchport port-security
 switchport port-security maximum 2
 switchport port-security violation restrict
 switchport port-security mac-address sticky
 no shutdown
exit

! VLAN 37 (PRACTICANTES)
interface range GigabitEthernet1/0/18-20
 switchport mode access
 switchport access vlan 37
 spanning-tree portfast
 switchport port-security
 switchport port-security maximum 2
 switchport port-security violation restrict
 switchport port-security mac-address sticky
 no shutdown
exit

! -- TRONCALES Y ETHERCHANNEL
interface GigabitEthernet1/0/3
 switchport mode trunk
 ip dhcp snooping trust
 ip arp inspection trust
 no shutdown
exit

interface range GigabitEthernet1/0/12-13
 switchport mode trunk
 channel-protocol pagp
 channel-group 1 mode desirable
 ip dhcp snooping trust
 ip arp inspection trust
 no shutdown
exit

! -- SEGURIDAD GLOBAL
ip dhcp snooping
ip dhcp snooping vlan 33-37
no ip dhcp snooping information option
ip arp inspection vlan 33-37

! -- LINEAS DE ACCESO
line con 0
 logging synchronous
exit

line vty 0 4
 transport input ssh
 login local
exit

end
write memory