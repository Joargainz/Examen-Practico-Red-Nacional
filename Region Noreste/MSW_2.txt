enable
configure terminal
hostname MSW_2

ip routing

! -- SSH 
username admin secret class
ip domain-name juanmark.com
crypto key generate rsa
1024
line vty 0 4
 login local
 transport input ssh

int vlan 100 
ip address 148.60.100.101 255.255.255.0
ip default-gateway 148.60.100.1
no shut

! -- DHCP 
! Exclusiones
ip dhcp excluded-address 148.60.97.1
ip dhcp excluded-address 148.60.98.1
ip dhcp excluded-address 148.60.99.1
ip dhcp excluded-address 148.60.100.1
ip dhcp excluded-address 148.60.98.254

! Pools
ip dhcp pool POOL_TI
 network 148.60.97.0 255.255.255.0
 default-router 148.60.97.1
 dns-server 148.60.0.10
exit

ip dhcp pool POOL_VENTAS
 network 148.60.98.0 255.255.255.0
 default-router 148.60.98.1
 dns-server 148.60.0.10
exit

ip dhcp pool POOL_COMPRAS
 network 148.60.99.0 255.255.255.0
 default-router 148.60.99.1
 dns-server 148.60.0.10
exit

ip dhcp pool POOL_SERVICIOS
 network 148.60.100.0 255.255.255.0
 default-router 148.60.100.1
 dns-server 148.60.0.10
exit

! -- STP 
! MSW_2 es ROOT BRIDGE para VLAN 98
spanning-tree mode pvst
spanning-tree vlan 98 priority 24576
spanning-tree vlan 97,99-100 priority 28672

! -- CREACIÓN DE VLANS --
!
vlan 97
 name GESTION_TI
vlan 98
 name VENTAS
vlan 99
 name COMPRAS
vlan 100
 name SERVICIOS
vlan 200
 name CONEXION_ROUTERS
exit

! -- PUERTOS TRONCALES 
interface range GigabitEthernet1/0/1-4
 switchport mode trunk
 switchport nonegotiate
 no shutdown
exit

! -- PUERTOS DE ACCESO
! GESTION_TI
interface range GigabitEthernet1/0/5-9
 switchport access vlan 97
 switchport mode access
 switchport port-security
 switchport port-security maximum 2
 switchport port-security mac-address sticky
 switchport port-security violation restrict
 spanning-tree portfast
 no shutdown
exit

! VENTAS
interface range GigabitEthernet1/0/10-14
 switchport access vlan 98
 switchport mode access
 switchport port-security
 switchport port-security maximum 2
 switchport port-security mac-address sticky
 switchport port-security violation restrict
 spanning-tree portfast
 no shutdown
exit

! COMPRAS
interface range GigabitEthernet1/0/15-19
 switchport access vlan 99
 switchport mode access
 switchport port-security
 switchport port-security maximum 2
 switchport port-security mac-address sticky
 switchport port-security violation restrict
 spanning-tree portfast
 no shutdown
exit

! SERVICIOS 
interface range GigabitEthernet1/0/20-24
 switchport access vlan 100
 switchport mode access
 switchport port-security
 switchport port-security maximum 2
 switchport port-security mac-address sticky
 switchport port-security violation restrict
 spanning-tree portfast
 no shutdown
exit

! -- INTERFACES (SVI)
interface Vlan97
 ip address 148.60.97.1 255.255.255.0
 no shutdown
exit

interface Vlan98
 ip address 148.60.98.1 255.255.255.0
 no shutdown
exit

interface Vlan99
 ip address 148.60.99.1 255.255.255.0
 no shutdown
exit

interface Vlan100
 ip address 148.60.100.1 255.255.255.0
 no shutdown
exit

! Conexión hacia LaVaca
interface Vlan200
 ip address 148.60.200.2 255.255.255.248
 no shutdown
exit

! -- Rip
router rip
 version 2
 network 148.60.0.0
 no auto-summary
exit

 !-- Ruta por default
ip route 0.0.0.0 0.0.0.0 148.60.200.1